<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>送货登记</title>
		<link rel="stylesheet" type="text/css" href="../css/index.css" />
		<link rel="stylesheet" type="text/css" href="../font/iconfont.css" />
		<link rel="stylesheet" href="../css/mui.min.css">
		<link rel="stylesheet" href="../css/LCalendar.css">
	</head>

	<body>
		<div class="all_bigbox">
			<p>
				<a href="#">
					<i class="iconfont one">&#xe601;</i>
				</a>
				<span>汉脑访客系统</span>
				<a href="#">
					<i class="iconfont two">&#xe61d;</i>
				</a>
			</p>
			<div class="caller_details_top">
				<img src="../images/送.png" alt="" /><span>送货访客信息</span>
			</div>
			<div class="caller_details_content">
				<table>
					<tr>
						<td><span>姓名：</span><input type="text" name="" id="" value="" /></td>
					</tr>
					<tr>
						<td><span>手机：</span><input type="text" name="" id="" value="" /></td>
					</tr>
					<tr>
						<td><span>公司：</span><input type="text" name="" id="autoCom" value=""/>
						</td>
					</tr>
					<tr>
						<td><span>随行：</span><input type="text" name="" id="" value="" /></td>
					</tr>
					<tr>
						<td style="margin-bottom: 0.5rem;">
							<span id="cp_public_span">车牌：</span>
							<div class="selectStyle">
								<select name="" class="select">
									<option value="">浙</option>
									<option value="">沪</option>
									<option value="">皖</option>
									<option value="">4</option>
									<option value="">5</option>
									<option value="">6</option>
									<option value="">7</option>
								</select>
								<i class="iconfont">&#xe627;</i>
							</div>
							<input type="text" name="" id="cp_public_input" value=""/>
						</td>
					</tr>
				</table>
			</div>

			<div class="caller_details_top">
				<img src="../images/访.png" alt="" /><span>被访者信息</span>
			</div>
			<div class="caller_details_content">
				<table>
					<tr>
						<td><span>公司：</span><input type="text" name="" id="" value="" /></td>
					</tr>
					<tr>
						<td><span>姓名：</span><input type="text" name="" id="" value="" /></td>
					</tr>
					<tr>
						<td><span style="width: 7.8rem;">日期：</span>
							<input id="demo1" type="text" readonly="" name="input_date" data-lcalendar="2000-01-01,2018-01-29" />
							至<input id="demo2" type="text" readonly="" name="input_date" data-lcalendar="2000-01-01,2018-01-29"/>
						</td>
					</tr>
					<tr>
						<td style="margin-bottom: 0.5rem;"><span style="width: 2rem;">送货单号: </span><input type="text" name="" id="" value="" style="margin-left: 0.8rem;"/></td>
					</tr>
				</table>
			</div>
			<button class="caller_details_btn">申请访问</button>
			<div class="bottom_box public_bottom_style">
				<div class="register_buttom">
					<a href="#"><img src="../images/浙江汉脑.png" /></a>
					<span></span>
					<a href="#"><img src="../images/鉴真宝.png" /></a>
				</div>
			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/demo.js"></script>
		<script src="../js/jquery-3.2.0.slim.min.js"></script>
		<script src="../js/index.js"></script>
		<script src="../js/LCalendar.js"></script>
		<script>
		var now = new Date();
		demo1.value=new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(); 
		var now = new Date();
		demo2.value=new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate();
		
			var calendar = new LCalendar();
			calendar.init({
				'trigger': '#demo1', //标签id
				'type': 'date', //date 调出日期选择 datetime 调出日期时间选择 time 调出时间选择 ym 调出年月选择,
				'minDate': new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(), //最小日期
				'maxDate': new Date().getFullYear() + '-' + (new Date().getMonth() + 3) + '-' + new Date().getDate()//最大日期
			});
			
			var calendar = new LCalendar();
			calendar.init({
				'trigger': '#demo2', //标签id
				'type': 'date', //date 调出日期选择 datetime 调出日期时间选择 time 调出时间选择 ym 调出年月选择,
				'minDate': new Date().getFullYear() + '-' + (new Date().getMonth() + 1) + '-' + new Date().getDate(), //最小日期
				'maxDate': new Date().getFullYear() + '-' + (new Date().getMonth() + 3) + '-' + new Date().getDate()//最大日期
			});
			
				(autoComplete = {
					pop_len: 10,
					pop_cn: 'autoDis',
					hover_cn: 'cur',
					source: '13612345564|13825646464|13412236054|13012348564|13012345564|13012365564|彭小|王达|李相公|周欢欢'.split('|'),
					init: function() {
						this.setDom();
						return this;
					},
					bind: function(x) {
						if(x.getAttribute('type') != 'text' || x.nodeName != 'INPUT')
							return null;
						var self = this;
						x.onkeyup = function(e) {
							e = e || window.event;
							var lis = self.pop.getElementsByTagName('li'),
								lens = self.pop.getElementsByTagName('li').length,
								n = lens,
								temp;
							if(e.keyCode == 38) { //键盘up键被按下 
								if(self.pop.style.display != 'none') {
									for(var i = 0; i < lens; i++) { //遍历结果数据，判断是否被选中 
										if(lis[i].className)
											temp = i;
										else
											n--;
									}
									if(n == 0) { //如果没有被选中的li元素，则选中最后一个 
										lis[lens - 1].className = self.hover_cn;
										this.value = lis[lens - 1].innerHTML;
									} else { //如果有被选中的元素，则选择上一个元素并赋值给input 
										if(lis[temp] == lis[0]) { //如果选中的元素是第一个孩子节点则跳到最后一个选中 
											lis[lens - 1].className = self.hover_cn;
											this.value = lis[lens - 1].innerHTML;
											lis[temp].className = '';
										} else {
											lis[temp - 1].className = self.hover_cn;
											this.value = lis[temp - 1].innerHTML;
											lis[temp].className = '';
										}
									}
								} else //如果弹出层没有显示则执行插入操作，并显示弹出层 
									self.insert(this);
							} else if(e.keyCode == 40) { //down键被按下，原理同up键 
								if(self.pop.style.display != 'none') {
									for(var i = 0; i < lens; i++) {
										if(lis[i].className)
											temp = i;
										else
											n--;
									}
									if(n == 0) {
										lis[0].className = self.hover_cn;
										this.value = lis[0].innerHTML;
									} else {
										if(lis[temp] == lis[lens - 1]) {
											lis[0].className = self.hover_cn;
											this.value = lis[0].innerHTML;
											lis[temp].className = '';
										} else {
											lis[temp + 1].className = self.hover_cn;
											this.value = lis[temp + 1].innerHTML;
											lis[temp].className = '';
										}
									}
								} else
									self.insert(this);
							} else //如果按下的键既不是up又不是down那么直接去匹配数据并插入 
								self.insert(this);
						};
						x.onblur = function() { //这个延迟处理是因为如果失去焦点的时候是点击选中数据的时候会发现先无法触发点击事件 
							setTimeout(function() {
								self.pop.style.display = 'none';
							}, 300);
						};
						return this;
					},
					setDom: function() {
						var self = this;
						var dom = document.createElement('div'),
							frame = document.createElement('iframe'),
							ul = document.createElement('ul');
						document.body.appendChild(dom);
						with(frame) { //用来在ie6下遮住select元素 
							setAttribute('frameborder', '0');
							setAttribute('scrolling', 'no');
							style.cssText = 'z-index:-1;position:absolute;left:0;top:0;'
						}
						with(dom) { //对弹出层li元素绑定onmouseover，onmouseover 
							className = this.pop_cn;
							appendChild(frame);
							appendChild(ul);
							onmouseover = function(e) { //在li元素还没有加载的时候就绑定这个方法，通过判断target是否是li元素进行处理 
								e = e || window.event;
								var target = e.srcElement || e.target;
								if(target.tagName == 'LI') { //添加样式前先把所有的li样式去掉，这里用的是一种偷懒的方式，没有单独写removeClass方法 
									for(var i = 0, lis = self.pop.getElementsByTagName('li'); i < lis.length; i++)
										lis[i].className = '';
									target.className = self.hover_cn; //也没有写addClass方法，直接赋值了 
								}
							};
							onmouseout = function(e) {
								e = e || window.event;
								var target = e.srcElement || e.target;
								if(target.tagName == 'LI')
									target.className = '';
							};
						}
						this.pop = dom;
					},
					insert: function(self) {
						var bak = [],
							s, li = [],
							left = 0,
							top = 0,
							val = self.value;
						for(var i = 0, leng = this.source.length; i < leng; i++) { //判断input的数据是否与数据源里的数据一致 
							if(!!val && val.length <= this.source[i].length && this.source[i].substr(0, val.length) == val) {
								bak.push(this.source[i]);
							}
						}
						if(bak.length == 0) { //如果没有匹配的数据则隐藏弹出层 
							this.pop.style.display = 'none';
							return false;
						} //这个弹出层定位方法之前也是用循环offsetParent，但发现ie跟ff下差别很大（可能是使用方式不当），所以改用这个getBoundingClientRect 
						left = self.getBoundingClientRect().left + document.documentElement.scrollLeft;
						top = self.getBoundingClientRect().top + document.documentElement.scrollTop + self.offsetHeight;
						with(this.pop) {
							style.cssText = 'width:' + self.offsetWidth + 'px;' + 'position:absolute;left:' + left + 'px;top:' + top + 'px;display:none;';
							getElementsByTagName('iframe')[0].setAttribute('width', self.offsetWidth);
							getElementsByTagName('iframe')[0].setAttribute('height', self.offsetHeight);
							onclick = function(e) {
								e = e || window.event;
								var target = e.srcElement || e.target;
								if(target.tagName == 'LI')
									self.value = target.innerHTML;
								this.style.display = 'none';
							};
						}
						s = bak.length > this.pop_len ? this.pop_len : bak.length;
						for(var i = 0; i < s; i++)
							li.push('<li>' + bak[i] + '</li>');
						this.pop.getElementsByTagName('ul')[0].innerHTML = li.join('');
						this.pop.style.display = 'block';
					}
				}).init().bind(document.getElementById('autoCom'))/*.bind(document.getElementById('autoC'))*/;
		</script>
	</body>

</html>